---
title: 区块链共识算法
tags: 共识算法 PoS PoW DPoS
---

### PoW:工作量证明机制（Proof of Work）

#### 基本原理
 - 通过计算出一个满足某个Hash难度（由N个前导0构成）的数值（nonce)。
 - 寻找合理hash是一个概率事件，当节点拥有占全网n%的算力时，该节点即有n/100的概率找到这个合理的Block Hash。
 - 当节点找到满足的Hash值后，会马上对全网进行广播打包区块，其他节点收到后会立刻对其进行验证，如果通过验证会记录到自己的账本中，然后进行下一个区块的Hash计算。网络中只有最快被计算出来的区块，才会添加到账本中，其他节点进行复制，这样就保证了整个账本的唯一性。
 - 假如节点由任何的作弊行为，都回导致网络的节点验证不通过，直接丢弃其打包的区块，这个区块就不能记录到总账本中，耗费的成本很大，使得矿工们自觉遵守系统的共识协议，确保了系统的安全性。
 
 #### 优缺点：
 - 优点：完全去中心化，节点自由进出，避免了建立和维护中心化信用机构的成本；只要网络破坏者的算力不超过网络总算力的51%，网络的交易状态就能达成一致。
 - 缺点：挖矿造成大量的资源浪费；挖矿的激励机制也造成矿池算力的高度集中，背离了去中心化设计的初衷；共识达成的周期
较长，每秒只能最多做7笔交易，不适合商业应用。

 
### PoS:权益证明机制（Proof of Stake）

#### 基本原理
 - 也称股权证明，类似于财产存储在银行，这种模式会根据你持有数字货币的数量和时间分配给你相应的利息。
 - 在股权证明POS模式下，有一个名词叫币龄，每个币每天产生1币龄，比如你持有100个币，总共持有了30天，那么，此时你的币龄就为3000，这个时候，如果你发现了一个POS区块，你的币龄就会被清空为0。你每被清空365币龄，你将会从区块中获得0.05个币的利息(假定利息可理解为年利率5%)，那么在这个案例中，利息 = 3000 * 5% / 365 = 0.41个币，这就是利息收益（需要打开客户端，让它保持在线，就能获得利息获益，同时保证网络的安全）

 #### 优缺点：
 - 优点：在一定程度上缩短了共识达成的时间，降低了PoW机制的资源浪费；
 - 缺点：破坏者对网络攻击的成本低，网络的安全性有待验证。拥有代币数量大的节点获得记账权的几率更大，会使得网络的共识受少数富裕账户支配，从而失去公正性。

 
 ### DPoS:股份授权证明机制（Delegated Proof of Stake）

#### 基本原理
 - 让每一个持有比特股的人进行投票，由此产生101位代表 , 我们可以将其理解为101个超级节点或者矿池，而这101个超级节点彼此的权利是完全相等的。如果代表不能履行他们的职责（当轮到他们时，没能生成区块），他们会被除名，网络会选出新的超级节点来取代他们。
 - 类似于董事会，由选举产生，代表成员行使权力，给成员进行分红。

 #### 优缺点
 - 优点：大幅缩小参与验证和记账节点的数量，可以达到秒级的共识验证。相对PoW节约资源，相对PoS更加公平。
 - 缺点：投票的积极性不高；社区选举有可能存在网络安全问题；选举固定数量的见证人作为记账候选人有可能不适合于完全去中心化的场景。


### 分布式一致性算法

定义：基于传统的分布式一致性技术，其中有分为解决拜占庭将军问题的拜占庭容错算法，如PBFT。另外解决非拜占庭问题的分布式一致性算法（Pasox、
Raft）